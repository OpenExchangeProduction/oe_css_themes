<p class="selector">selector</p>
<script>
function defer(callback) {
  if (window.jQuery) {
      callback();
  } else {
      setTimeout(() => defer(callback), 50);
      console.log('$ undefined');
  }
}

const callback = function () {
  var selector = document.querySelector('.selector');
  var rte = selector.closest('.featured-category');
  rte.classList.add("hide");

  $(".featured-knovio").insertAfter(".list-view-item:nth-child(5)");
  $('.thumb[src*="label"]').closest('.list-view-item').addClass('label');

  $('.list-page-description:contains(</a>)').each(function(i, obj) {
    var oldText = $(this).text();
    var split = oldText.split('~');
    console.log(split);
    var newText = split[0];
    var anchor = split[1];
    $(this).html('<p>' + newText + '</p>' + anchor );
  });

  var thumbnail = $('.thumb[src*="mp4"]');
  thumbnail.closest('.thumb-wrapper').addClass('hide');
  var videoWrap = thumbnail.closest('.post-identifier');
  var iframe = '<div class="thumb-wrapper"><div class="video-wrap"><video controls="" name="media"><source src="https://www.openexc.com/wp-content/uploads/2022/08/Ubs-Esg-Video-1.mp4"></video></div></div>';
  videoWrap.prepend(iframe);
}

defer(callback);
</script>

<style>
  .featured-category.hide {
    display: none;
  }
</style>
